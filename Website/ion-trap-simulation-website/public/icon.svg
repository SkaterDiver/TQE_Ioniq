<svg width="180" height="180" viewBox="0 0 180 180" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradient definitions for light mode -->
    <linearGradient id="bg-gradient-light" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
    </linearGradient>

    <!-- Gradient definitions for dark mode -->
    <linearGradient id="bg-gradient-dark" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e3a8a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#581c87;stop-opacity:1" />
    </linearGradient>

    <!-- Ion gradient -->
    <radialGradient id="ion-gradient-light" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </radialGradient>

    <radialGradient id="ion-gradient-dark" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#fde047;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#facc15;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#eab308;stop-opacity:1" />
    </radialGradient>

    <!-- Glow effect -->
    <radialGradient id="glow-light" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:0.8" />
      <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:0" />
    </radialGradient>

    <radialGradient id="glow-dark" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#fde047;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#facc15;stop-opacity:0" />
    </radialGradient>

    <!-- Electric field gradient -->
    <linearGradient id="field-gradient-light" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:0.3" />
      <stop offset="50%" style="stop-color:#a78bfa;stop-opacity:0.5" />
      <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:0.3" />
    </linearGradient>

    <linearGradient id="field-gradient-dark" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.4" />
      <stop offset="50%" style="stop-color:#8b5cf6;stop-opacity:0.6" />
      <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:0.4" />
    </linearGradient>

    <style>
      @media (prefers-color-scheme: light) {
        .bg-rect { fill: url(#bg-gradient-light); }
        .electrode { fill: #1e40af; }
        .electrode-accent { fill: #3b82f6; }
        .ion { fill: url(#ion-gradient-light); }
        .glow { fill: url(#glow-light); }
        .field-line { stroke: #60a5fa; }
        .field-area { fill: url(#field-gradient-light); }
        .quantum-orbit { stroke: #a78bfa; }
      }
      @media (prefers-color-scheme: dark) {
        .bg-rect { fill: url(#bg-gradient-dark); }
        .electrode { fill: #60a5fa; }
        .electrode-accent { fill: #93c5fd; }
        .ion { fill: url(#ion-gradient-dark); }
        .glow { fill: url(#glow-dark); }
        .field-line { stroke: #3b82f6; }
        .field-area { fill: url(#field-gradient-dark); }
        .quantum-orbit { stroke: #c4b5fd; }
      }
    </style>
  </defs>

  <!-- Background gradient -->
  <rect class="bg-rect" width="180" height="180" rx="36" />

  <!-- Quadrupole field representation -->
  <g opacity="0.4">
    <path class="field-area" d="M 90 30 Q 130 70 90 110 Q 50 70 90 30 Z" />
    <path class="field-area" d="M 90 70 Q 130 110 90 150 Q 50 110 90 70 Z" />
    <path class="field-area" d="M 30 90 Q 70 50 110 90 Q 70 130 30 90 Z" />
    <path class="field-area" d="M 70 90 Q 110 50 150 90 Q 110 130 70 90 Z" />
  </g>

  <!-- Electric field lines -->
  <g class="field-line" stroke-width="1.5" fill="none" opacity="0.6">
    <path d="M 90 40 Q 75 65 90 90 Q 105 65 90 40" />
    <path d="M 90 140 Q 75 115 90 90 Q 105 115 90 140" />
    <path d="M 40 90 Q 65 75 90 90 Q 65 105 40 90" />
    <path d="M 140 90 Q 115 75 90 90 Q 115 105 140 90" />
  </g>

  <!-- Top RF electrode pair -->
  <g>
    <rect class="electrode" x="35" y="30" width="50" height="12" rx="3" />
    <rect class="electrode-accent" x="37" y="32" width="46" height="3" rx="1.5" opacity="0.5" />
    <rect class="electrode" x="95" y="30" width="50" height="12" rx="3" />
    <rect class="electrode-accent" x="97" y="32" width="46" height="3" rx="1.5" opacity="0.5" />
  </g>

  <!-- Bottom RF electrode pair -->
  <g>
    <rect class="electrode" x="35" y="138" width="50" height="12" rx="3" />
    <rect class="electrode-accent" x="37" y="140" width="46" height="3" rx="1.5" opacity="0.5" />
    <rect class="electrode" x="95" y="138" width="50" height="12" rx="3" />
    <rect class="electrode-accent" x="97" y="140" width="46" height="3" rx="1.5" opacity="0.5" />
  </g>

  <!-- Left RF electrode pair -->
  <g>
    <rect class="electrode" x="30" y="35" width="12" height="50" rx="3" />
    <rect class="electrode-accent" x="32" y="37" width="3" height="46" rx="1.5" opacity="0.5" />
    <rect class="electrode" x="30" y="95" width="12" height="50" rx="3" />
    <rect class="electrode-accent" x="32" y="97" width="3" height="46" rx="1.5" opacity="0.5" />
  </g>

  <!-- Right RF electrode pair -->
  <g>
    <rect class="electrode" x="138" y="35" width="12" height="50" rx="3" />
    <rect class="electrode-accent" x="145" y="37" width="3" height="46" rx="1.5" opacity="0.5" />
    <rect class="electrode" x="138" y="95" width="12" height="50" rx="3" />
    <rect class="electrode-accent" x="145" y="97" width="3" height="46" rx="1.5" opacity="0.5" />
  </g>

  <!-- Quantum orbital paths -->
  <g class="quantum-orbit" stroke-width="1" fill="none" opacity="0.5">
    <ellipse cx="90" cy="90" rx="18" ry="25" transform="rotate(45 90 90)" />
    <ellipse cx="90" cy="90" rx="18" ry="25" transform="rotate(-45 90 90)" />
  </g>

  <!-- Ion glow -->
  <circle class="glow" cx="90" cy="90" r="28" />

  <!-- Main trapped ion -->
  <circle class="ion" cx="90" cy="90" r="14" />

  <!-- Ion highlight for 3D effect -->
  <circle fill="white" opacity="0.7" cx="86" cy="86" r="5" />
  <circle fill="white" opacity="0.4" cx="88" cy="88" r="3" />

  <!-- Quantum state indicators (smaller orbiting particles) -->
  <g opacity="0.8">
    <circle class="ion" cx="90" cy="65" r="3.5">
      <animateTransform
        attributeName="transform"
        attributeType="XML"
        type="rotate"
        from="0 90 90"
        to="360 90 90"
        dur="4s"
        repeatCount="indefinite"/>
    </circle>
    <circle class="ion" cx="115" cy="90" r="3.5">
      <animateTransform
        attributeName="transform"
        attributeType="XML"
        type="rotate"
        from="90 90 90"
        to="450 90 90"
        dur="4s"
        repeatCount="indefinite"/>
    </circle>
    <circle class="ion" cx="90" cy="115" r="3.5">
      <animateTransform
        attributeName="transform"
        attributeType="XML"
        type="rotate"
        from="180 90 90"
        to="540 90 90"
        dur="4s"
        repeatCount="indefinite"/>
    </circle>
    <circle class="ion" cx="65" cy="90" r="3.5">
      <animateTransform
        attributeName="transform"
        attributeType="XML"
        type="rotate"
        from="270 90 90"
        to="630 90 90"
        dur="4s"
        repeatCount="indefinite"/>
    </circle>
  </g>
</svg>
